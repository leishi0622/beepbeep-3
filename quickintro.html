<!DOCTYPE HTML>
<!--
	Verti by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
--><html>
<head>
		<title>Learn BeepBeep in five minutes - BeepBeep 3</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!--[if lte IE 8]><script src="/assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css">
		<!--[if lte IE 8]><link rel="stylesheet" href="/assets/css/ie8.css" /><![endif]-->
		<link rel="stylesheet" href="assets/css/custom.css">
		<meta name="author" content="Laboratoire d'informatique formelle">
		<link rel="stylesheet" href="assets/js/styles/default.css">
		<script src="assets/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
	</head>
	<body class="left-sidebar">
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header-wrapper">
					<header id="header" class="container">

						<!-- Logo -->
							<div id="logo">
								<h1><a href="index.html">BeepBeep 3</a></h1>
								<!--<span>by HTML5 UP</span>-->
							</div>

						<!-- Nav -->
						<nav id="nav">
	<ul>
		<li><a href="index.html">Home</a></li>
		<li><a href="quickintro.html">In 5 minutes</a></li>
		<li>
<a href="features.html">Features</a>
			<ul>
			  <li><a href="use-cases.html">Examples of uses</a></li>
				<li><a href="palettes.html">Available extensions</a></li>
			</ul>
		</li>
		<li><a href="get.html">Get BeepBeep</a></li>
		<li>
<a href="documentation.html">Documentation</a>
		  <ul>
		    <li><a href="guide/index.html">User Guide</a></li>
		    <li><a href="javadoc/index.html">API Reference</a></li>
		  </ul>
		</li>
	</ul>
</nav>
<!-- :indentSize=2:tabSize=2: -->


					</header>
				</div>
<!-- Main -->
<div id="main-wrapper">
	<div class="container">
		<div class="row 200%">
			<div class="4u 12u$(medium)">
				<div id="sidebar">

					<!-- Sidebar -->
					<section>
<h3>In this page</h3>
<p>Learn the basic principles of BeepBeep on a simple event stream.</p>
<ul class="style2">
	<li><a href="#select">Selecting columns</a></li>
	<li><a href="#sum">Computing a sum</a></li>
	<li><a href="#results">Getting the results</a></li>
	<li><a href="#thatsit">That's it!</a></li>
</ul>
</section>
<!--
<section>
	<h3>Subheading</h3>
	<p>Phasellus quam turpis, feugiat sit amet ornare in, hendrerit in lectus.
	Praesent semper mod quis eget mi. Etiam eu ante risus. Aliquam erat volutpat.
	Aliquam luctus et mattis lectus sit amet pulvinar. Nam turpis nisi
	consequat etiam.</p>
	<footer>
		<a href="#" class="button icon fa-info-circle">Find out more</a>
	</footer>
</section>

<section>
	<h3>Subheading</h3>
	<ul class="style2">
		<li><a href="#">Amet turpis, feugiat et sit amet</a></li>
		<li><a href="#">Ornare in hendrerit in lectus</a></li>
		<li><a href="#">Semper mod quis eget mi dolore</a></li>
		<li><a href="#">Quam turpis feugiat sit dolor</a></li>
		<li><a href="#">Amet ornare in hendrerit in lectus</a></li>
		<li><a href="#">Semper mod quisturpis nisi</a></li>
	</ul>
</section>
-->
<!-- :indentSize=2:tabSize=2: -->
				</div>
			</div>
			<div class="8u 12u$(medium) important(medium)">
				<div id="content">

					<!-- Content -->
						<article>
						<h2>Learn BeepBeep in five minutes</h2>

<p>In this quick tutorial, you will learn the basics of ESQL, the Event Stream Query Language that BeepBeep uses to process sequences of data elements called <strong>events</strong>.</p>

<h3>
  <a name="select">Selecting columns</a>
</h3>

<p>Suppose you have a system that produced a stream of numerical values and stored them one after the other in a text file called <code>Values.csv</code>. The file looks like this:</p>

<pre>a  b  c
-------
0  1  6
2  1  2
8  5  3
</pre>

<p>Each line corresponds to an event, which contains values for three parameters, called <em>a</em>, <em>b</em> and <em>c</em>. You want to read this <strong>trace</strong> of events and get the values for column <em>a</em>.</p>

<p>If this trace were a table where each event is a line, what SQL query would you write to do this? Well, it turns out that the ESQL query you need to write looks very similar:</p>

<pre>SELECT a FROM (
  THE TUPLES OF FILE "Values.csv" )
</pre>

<p>This expression actually involves three processors. A processor takes zero or more event traces as its input, and returns zero or more event traces as its output. In the previous query, the expression <code>FILE "Values.csv"</code> corresponds to the input processor, which reads data from a file and produces an output trace made of the contents of that file, separated into binary chunks:</p>

<p>
  <img src="pipe-file.png" alt="File processor">
</p>

<p>The second processor corresponds to the expression THE TUPLES OF. Its job is to take as input a trace of binary chunks, to interpret these chunks as the contents of a CSV file, and to create a tuple out of each line:</p>

<p>
  <img src="pipe-tuple.png" alt="Tuple processor">
</p>

<p>The third processor corresponds to the SELECT part. For each tuple it receives as its input, it cuts and combines parts of that tuple to produce a new tuple as output. In our case, the expression is simply to return the value of column a directly.</p>

<p>
  <img src="pipe-select.png" alt="Select processor">
</p>

<p>The process of giving the output trace(s) of a processor as the input to another processor is called <strong>composition</strong>. In our example, the previous expression is the composition, or "piping", of these three processors together, producing a <em>chain</em> of processors:</p>

<p>
  <img src="pipe-complete.png" alt="All processors">
</p>

<h3>
  <a name="sum">Computing a sum</a>
</h3>

<p>The nice thing about processors is that anything can be piped to anything, as long as the events are of the proper type; for example, it does not make sense to send the output of the FILE processor directly into SELECT, as FILE produces binary chunks and SELECT expects tuples.</p>

<p>This means that we can pipe the output of the previous expression into something else. For example, we could compute the cumulative sum of all values of a using the expression COMBINE ... WITH .... The expression takes as input a trace of events, and an operator that will be used to "combine" the events of the trace. Graphically, the combiner can be represented as:</p>

<p>
  <img src="pipe-combiner.png" alt="Combiner">
</p>

<p>The combiner takes an input event, passes it into a function (the blue box) and returns the result. This result is also piped back into the function to be applied with the next event that will come. The combiner needs to be supplied with an initial event e that is used to call the function for the first event it receives.</p>

<p>In our case, the function we need to use is <code>ADDITION</code>, which implicitly assumes the number 0 as its starting event e when used in a combiner. The query becomes the following:</p>

<pre>COMBINE (
  SELECT a FROM (
    THE TUPLES OF FILE "Values.csv" ))
WITH ADDITION
</pre>

<p>Or graphically:</p>

<p>
  <img src="pipe-complete2.png" alt="All processors 2">
</p>

<h3>
  <a name="results">Getting the results</a>
</h3>

<p>You have probably noticed that the result of our chain of processors is a single pipe that sends out events into the open air. These output events have to go <em>somewhere</em>. We shall now show how you can get a grasp of these events and use them, for example, in your own Java program.</p>

<h4>Using JDBC</h4>

<p>If you know how to use <a href="https://en.wikipedia.org/wiki/Jdbc">JDBC</a> to access SQL databases, you can also use it to read the output of an ESQL query. Instead of calling SQL queries to a database server like MySQL, you simply call ESQL queries on BeepBeep.</p>

<pre><code>Class.forName("ca.uqac.lif.cep.jdbc.BeepBeepDriver");
Connection con = java.sql.DriverManager.getConnection("jdbc:beepbeep:","user","password");
Statement stmt = con.createStatement();
ResultSet rs = stmt.executeQuery("SELECT a FROM (THE TUPLES OF FILE 'Values.csv')");
while(rs.next()) {
  int sum = rs.getInt();
}
rs.close();
con.close();
</code>
</pre>

<p>In SQL, you use <code>next()</code> and <code>getXXX()</code> to fetch one more tuple of the result and some element of that tuple, respectively. In ESQL, you use the same methods to pull the next event of the result stream, and get some element of that event.</p>

<h4>Using native objects</h4>

<p>Another way to get the results is to manipulate the result of the query directly.</p>

<pre><code>Interpreter my_int = new Interpreter();
Pullable p = my_int.executeQuery("COMBINE (SELECT a FROM (THE TUPLES OF FILE 'Values.csv')) WITH ADDITION");
while (p.hasNext() == NextStatus.YES) {
  int sum = (int) p.next();
}
</code>
</pre>

<p>Notice how pulling the cumulative sum out of a column of an external CSV file has been reduced to a four-liner. As a matter of fact, we claim that BeepBeep is the easiest stream processor around.</p>

<p>If you wish, you can also do without the ESQL syntax, and pipe the processors by yourself:</p>

<pre><code>StreamReader sr = new StreamReader(new FileInputStream(new File("Values.csv")));
TupleFeeder tf = new TupleFeeder();
Select s = new Select(1, "a");
Combiner comb = new Combiner(Addition.class);
Connector.connect(sr, tf, s, comb);
Pullable p = comb.getPullable(0);
while (p.hasNext() == NextStatus.YES) {
  int sum = (int) p.next();
}
</code>
</pre>

<h4>Through the command line</h4>

<p>One last way of doing something with the results is by calling BeepBeep on the command line, and have the result of the query sent to a file. By default, BeepBeep pipes the output of a query to the standard output, which means that you can pipe the results into the standard input of another process by simply writing:</p>

<pre>java -jar beepbeep3.jar query.esql | anotherprocess
</pre>

<p>where <code>query.esql</code> is a text file that contains the query (or set of queries) to execute.</p>

<h3>
  <a name="thatsit">That's it!</a>
</h3>

<p>Is it five minutes yet? So far you've learned:</p>

<ul>
<li>How BeepBeep uses chains of processors to process streams of events of various types</li>
<li>How you can write a chain of processors using a simple language called ESQL --which looks a lot like SQL</li>
<li>How you can easily fetch the results of an ESQL query and use them in your program, in about half a dozen lines of code</li>
</ul>

<p>You're now ready to learn more about BeepBeep.</p>

<ul>
<li>See what processors are available, and how you can use them in ESQL queries</li>
<li>
<a href="guide/custom.html">Create your own processor</a> in a few lines of code, and <a href="guide/extend.html">extend the ESQL grammar</a> to use it in your own queries</li>
</ul>

<!-- :wrap=soft: -->
						</article>

				</div>
			</div>
		</div>
	</div>
</div>
			<!-- Footer -->
				<div id="footer-wrapper">
					<footer id="footer" class="container">
						<div class="row">
							<div class="3u 6u(medium) 12u$(small)">

								<!-- Links -->
									<section class="widget links">
										<h3>Made at LIF</h3>
										<img src="http://liflab.github.io/beepbeep-3/images/logo-shadow.png" alt="LIF"><br>
										BeepBeep was developed through the research done at <a href="http://liflab.ca">LIF</a>, the Formal Computer Science Laboratory in <a href="http://www.uqac.ca/">Universit&eacute; du Qu&eacute;bec &agrave; Chicoutimi</a>, Canada.
									</section>

							</div>
							<div class="3u 6u$(medium) 12u$(small)">

								<!-- Links -->
									<section class="widget links">
										<h3>Interested?</h3>
										<p>BeepBeep is free software, released under the
										<a href="https://www.gnu.org/copyleft/lesser.html">GNU LGPL</a>.
										This means you can include it as a library in any project,
										including closed-source commercial software.</p>
									</section>

							</div>

							<div class="3u 6u$(medium) 12u$(small)">

								<!-- Contact -->
									<section class="widget contact last">
										<h3>Contact Us</h3>
										<ul>
											<!--<li><a href="#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>-->
											<li><a href="https://www.facebook.com/liflab" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
											<!--<li><a href="#" class="icon fa-instagram"><span class="label">Instagram</span></a></li>
											<li><a href="#" class="icon fa-dribbble"><span class="label">Dribbble</span></a></li>
											<li><a href="#" class="icon fa-pinterest"><span class="label">Pinterest</span></a></li>-->
										</ul>
										<p>Universit&eacute; du Qu&eacute;bec &agrave; Chicoutimi<br>
										Chicoutimi, QC G7H 2B1<br>
										Canada</p>
									</section>

							</div>
						</div>
						<div class="row">
							<div class="12u">
								<div id="copyright">
									<ul class="menu">
										<li>&copy; 2015-2016 Laboratoire d'informatique formelle. All rights reserved</li>
<li>Design: <a href="http://html5up.net">HTML5 UP</a>
</li>
<li>This site is generated by <a href="http://github.com/sylvainhalle/FantasticWindmill">Fantastic Windmill</a>
</li>
									</ul>
								</div>
							</div>
						</div>
					</footer>
				</div>

			</div>

		<!-- Scripts -->

			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="/assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>
			<!--
You are viewing a page using the REMOTE version of the site.
Insert here whatever HTML/PHP code you'd like to have in the pages on
your server only.
-->
<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//leduotang.ca/piwik/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//leduotang.ca/piwik/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code -->

	



</body>
</html><!-- :indentSize=2:tabSize=2: --><!-- :indentSize=2:tabSize=2: -->
